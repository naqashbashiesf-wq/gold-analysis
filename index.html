<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³ÛŒØ³ØªÙ… ØªØ­Ù„ÛŒÙ„ Ø·Ù„Ø§</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap');
        body { font-family: 'Vazirmatn', sans-serif; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const RefreshIcon = () => (
            <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
            </svg>
        );

        const TrendingUpIcon = () => (
            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
            </svg>
        );

        const TrendingDownIcon = () => (
            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 17h8m0 0V9m0 8l-8-8-4 4-6-6" />
            </svg>
        );

        const MinusIcon = () => (
            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M20 12H4" />
            </svg>
        );

        const GoldPriceTracker = () => {
            const [goldPrice, setGoldPrice] = useState(2650.50);
            const [silverPrice, setSilverPrice] = useState(30.25);
            const [usdRate, setUsdRate] = useState(107500);
            const [mesghalMarket, setMesghalMarket] = useState(48059000);
            const [geram18Market, setGeram18Market] = useState(3500000);
            const [dirhamRate, setDirhamRate] = useState(16500);
            const [uaeGoldPrice, setUaeGoldPrice] = useState(240);
            const [lastUpdate, setLastUpdate] = useState(new Date());
            const [isLoading, setIsLoading] = useState(false);

            const MESGHAL_DIVIDER = 9.5742;
            const GRAM_PER_OUNCE = 31.1;

            const mesghalTheo = (goldPrice * usdRate) / MESGHAL_DIVIDER;
            const diffMesghal = mesghalTheo - mesghalMarket;
            
            const geram18Theo = ((goldPrice / GRAM_PER_OUNCE) * usdRate) * 0.75;
            const diffGeram18 = geram18Theo - geram18Market;
            
            const realValueDirham = dirhamRate * uaeGoldPrice;
            const diffDirham = realValueDirham - geram18Market;
            
            const gsRatio = goldPrice / silverPrice;

            const formatNumber = (num) => {
                return new Intl.NumberFormat('fa-IR').format(Math.round(num));
            };

            const handleRefresh = () => {
                setIsLoading(true);
                setTimeout(() => {
                    setGoldPrice(prev => prev + (Math.random() - 0.5) * 10);
                    setSilverPrice(prev => prev + (Math.random() - 0.5) * 0.5);
                    setUsdRate(prev => prev + (Math.random() - 0.5) * 1000);
                    setLastUpdate(new Date());
                    setIsLoading(false);
                }, 1000);
            };

            const getSignal = (diff, high, low) => {
                if (diff > high) return { text: "Ø®Ø±ÛŒØ¯ Ù†Ø§Ù…Ù†Ø§Ø³Ø¨", color: "text-red-600 bg-red-50", Icon: TrendingDownIcon };
                if (diff > low) return { text: "Ù…ØªÙˆØ³Ø· - ØµØ¨Ø± Ú©Ù†ÛŒØ¯", color: "text-yellow-600 bg-yellow-50", Icon: MinusIcon };
                if (diff > 0) return { text: "âœ… Ø¨Ù‡ØªØ±ÛŒÙ† Ø®Ø±ÛŒØ¯!", color: "text-green-600 bg-green-50", Icon: TrendingUpIcon };
                if (diff > -low) return { text: "âœ… Ø¨Ù‡ØªØ±ÛŒÙ† ÙØ±ÙˆØ´!", color: "text-green-600 bg-green-50", Icon: TrendingUpIcon };
                if (diff > -high) return { text: "Ù…ØªÙˆØ³Ø· ÙØ±ÙˆØ´", color: "text-yellow-600 bg-yellow-50", Icon: MinusIcon };
                return { text: "ÙØ±ÙˆØ´ Ù†Ø§Ù…Ù†Ø§Ø³Ø¨", color: "text-red-600 bg-red-50", Icon: TrendingDownIcon };
            };

            const signalMesghal = getSignal(diffMesghal, 300000, 100000);
            const signalGeram18 = getSignal(diffGeram18, 150000, 50000);

            return (
                <div className="min-h-screen bg-gradient-to-br from-yellow-50 via-white to-yellow-50 p-3">
                    <div className="max-w-6xl mx-auto">
                        <div className="bg-gradient-to-r from-yellow-500 to-yellow-600 rounded-2xl p-4 mb-4 shadow-xl">
                            <div className="flex justify-between items-center mb-3">
                                <div>
                                    <h1 className="text-2xl font-bold text-white mb-1">Ø³ÛŒØ³ØªÙ… ØªØ­Ù„ÛŒÙ„ Ø·Ù„Ø§</h1>
                                    <p className="text-yellow-100 text-sm">ØªØ­Ù„ÛŒÙ„ Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ Ø¨Ø§ Û´ ÙØ±Ù…ÙˆÙ„</p>
                                </div>
                                <button
                                    onClick={handleRefresh}
                                    disabled={isLoading}
                                    className="bg-white text-yellow-600 p-3 rounded-xl hover:bg-yellow-50 transition-all disabled:opacity-50"
                                >
                                    <div className={isLoading ? 'animate-spin' : ''}>
                                        <RefreshIcon />
                                    </div>
                                </button>
                            </div>
                            <div className="text-yellow-100 text-xs">
                                Ø¢Ø®Ø±ÛŒÙ† Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: {lastUpdate.toLocaleTimeString('fa-IR')}
                            </div>
                        </div>

                        <div className="grid grid-cols-1 gap-3 mb-4">
                            <div className="bg-white rounded-xl p-3 shadow-lg border-r-4 border-yellow-500">
                                <span className="text-gray-600 text-xs block mb-1">Ø§Ù†Ø³ Ø¬Ù‡Ø§Ù†ÛŒ Ø·Ù„Ø§</span>
                                <div className="text-xl font-bold text-gray-800">${goldPrice.toFixed(2)}</div>
                            </div>
                            
                            <div className="bg-white rounded-xl p-3 shadow-lg border-r-4 border-blue-500">
                                <span className="text-gray-600 text-xs block mb-1">Ø§Ù†Ø³ Ù†Ù‚Ø±Ù‡</span>
                                <div className="text-xl font-bold text-gray-800">${silverPrice.toFixed(2)}</div>
                            </div>
                            
                            <div className="bg-white rounded-xl p-3 shadow-lg border-r-4 border-green-500">
                                <span className="text-gray-600 text-xs block mb-1">Ø¯Ù„Ø§Ø± Ø¨Ø§Ø²Ø§Ø±</span>
                                <div className="text-xl font-bold text-gray-800">{formatNumber(usdRate)} ØªÙˆÙ…Ø§Ù†</div>
                            </div>
                        </div>

                        <div className="space-y-4">
                            <div className="bg-white rounded-xl p-4 shadow-xl">
                                <h3 className="text-lg font-bold text-gray-800 mb-3 border-b pb-2">ğŸ“Š ÙØ±Ù…ÙˆÙ„ Ù…Ø«Ù‚Ø§Ù„</h3>
                                <div className="space-y-2 text-sm">
                                    <div className="flex justify-between">
                                        <span className="text-gray-600">Ù…Ø«Ù‚Ø§Ù„ Ø¨Ø§Ø²Ø§Ø±:</span>
                                        <span className="font-bold">{formatNumber(mesghalMarket)} Øª</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-gray-600">Ù…Ø«Ù‚Ø§Ù„ ØªØ¦ÙˆØ±ÛŒÚ©:</span>
                                        <span className="font-bold">{formatNumber(mesghalTheo)} Øª</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-gray-600">ØªÙØ§ÙˆØª:</span>
                                        <span className={`font-bold ${diffMesghal > 0 ? 'text-green-600' : 'text-red-600'}`}>
                                            {formatNumber(Math.abs(diffMesghal))} Øª
                                        </span>
                                    </div>
                                    <div className={`flex items-center gap-2 p-2 rounded-lg ${signalMesghal.color}`}>
                                        <signalMesghal.Icon />
                                        <span className="font-bold text-xs">{signalMesghal.text}</span>
                                    </div>
                                </div>
                            </div>

                            <div className="bg-white rounded-xl p-4 shadow-xl">
                                <h3 className="text-lg font-bold text-gray-800 mb-3 border-b pb-2">ğŸ’ ÙØ±Ù…ÙˆÙ„ Û±Û¸ Ø¹ÛŒØ§Ø±</h3>
                                <div className="space-y-2 text-sm">
                                    <div className="flex justify-between">
                                        <span className="text-gray-600">Û±Û¸ Ø¹ÛŒØ§Ø± Ø¨Ø§Ø²Ø§Ø±:</span>
                                        <span className="font-bold">{formatNumber(geram18Market)} Øª/Ú¯</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-gray-600">Û±Û¸ Ø¹ÛŒØ§Ø± ØªØ¦ÙˆØ±ÛŒÚ©:</span>
                                        <span className="font-bold">{formatNumber(geram18Theo)} Øª/Ú¯</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-gray-600">ØªÙØ§ÙˆØª:</span>
                                        <span className={`font-bold ${diffGeram18 > 0 ? 'text-green-600' : 'text-red-600'}`}>
                                            {formatNumber(Math.abs(diffGeram18))} Øª
                                        </span>
                                    </div>
                                    <div className={`flex items-center gap-2 p-2 rounded-lg ${signalGeram18.color}`}>
                                        <signalGeram18.Icon />
                                        <span className="font-bold text-xs">{signalGeram18.text}</span>
                                    </div>
                                </div>
                            </div>

                            <div className="bg-white rounded-xl p-4 shadow-xl">
                                <h3 className="text-lg font-bold text-gray-800 mb-3 border-b pb-2">ğŸ‡¦ğŸ‡ª ÙØ±Ù…ÙˆÙ„ Ø¯Ø±Ù‡Ù…/Ø§Ù…Ø§Ø±Ø§Øª</h3>
                                <div className="space-y-2 text-sm">
                                    <div className="flex justify-between">
                                        <span className="text-gray-600">Ø§Ø±Ø²Ø´ ÙˆØ§Ù‚Ø¹ÛŒ:</span>
                                        <span className="font-bold">{formatNumber(realValueDirham)} Øª</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-gray-600">Ù‚ÛŒÙ…Øª Ø§ÛŒØ±Ø§Ù†:</span>
                                        <span className="font-bold">{formatNumber(geram18Market)} Øª</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-gray-600">ØªÙØ§ÙˆØª:</span>
                                        <span className={`font-bold ${diffDirham > 0 ? 'text-green-600' : 'text-red-600'}`}>
                                            {formatNumber(Math.abs(diffDirham))} Øª
                                        </span>
                                    </div>
                                </div>
                            </div>

                            <div className="bg-white rounded-xl p-4 shadow-xl">
                                <h3 className="text-lg font-bold text-gray-800 mb-3 border-b pb-2">âš–ï¸ Ù†Ø³Ø¨Øª Ø·Ù„Ø§/Ù†Ù‚Ø±Ù‡</h3>
                                <div className="space-y-2 text-sm">
                                    <div className="flex justify-between items-center">
                                        <span className="text-gray-600">Ù†Ø³Ø¨Øª ÙØ¹Ù„ÛŒ:</span>
                                        <span className="font-bold text-2xl">{gsRatio.toFixed(2)}</span>
                                    </div>
                                    <div className="text-xs text-gray-500">
                                        Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ø·Ø¨ÛŒØ¹ÛŒ: Û¶Ûµ ØªØ§ Û¸Ûµ
                                    </div>
                                    <div className={`p-2 rounded-lg text-center ${
                                        gsRatio < 65 ? 'bg-green-50 text-green-600' :
                                        gsRatio > 85 ? 'bg-blue-50 text-blue-600' :
                                        'bg-gray-50 text-gray-600'
                                    }`}>
                                        <span className="font-bold text-xs">
                                            {gsRatio < 65 ? 'ğŸŸ¢ Ø·Ù„Ø§ Ø§Ø±Ø²Ø´Ù…Ù†Ø¯ØªØ±' :
                                             gsRatio > 85 ? 'ğŸ”µ Ù†Ù‚Ø±Ù‡ Ø§Ø±Ø²Ø´Ù…Ù†Ø¯ØªØ±' :
                                             'âšª Ù†Ø³Ø¨Øª Ø®Ù†Ø«ÛŒ'}
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div className="mt-6 text-center text-gray-500 text-xs p-4 bg-white rounded-xl">
                            <p className="mb-1">ğŸš€ Ù†Ø³Ø®Ù‡ Ø¢Ø²Ù…Ø§ÛŒØ´ÛŒ Ø±Ø§ÛŒÚ¯Ø§Ù†</p>
                            <p>Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§ÛŒ Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ù†ÛŒØ¯</p>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<GoldPriceTracker />, document.getElementById('root'));
    </script>
</body>
</html>
